(this["webpackJsonpdoordash-app"]=this["webpackJsonpdoordash-app"]||[]).push([[0],{152:function(e,t,n){},153:function(e,t,n){},231:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(23),c=n.n(s),r=(n(152),n(33)),i=n(239),o=n(236),l=(n(153),n(85)),u=n(106),d=n(104),j=n(143),h=n(234),b=n(238),f=n(57),m=n(241),p=n(242),O=function(e){var t=e.username,n=e.password,a="/login?username=".concat(t,"&password=").concat(n);return fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to log in")}))},g=function(e){return fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to sign up")}))},x=n(7),y=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={loading:!1},e.onFinish=function(t){console.log("Received values of sign in form: ",t),e.setState({loading:!0}),O(t).then((function(){j.b.success("Login Successful"),e.props.onSuccess()})).catch((function(e){j.b.error(e.message)})).finally((function(){e.setState({loading:!1})}))},e.render=function(){return Object(x.jsxs)(h.a,{name:"normal_login",onFinish:e.onFinish,style:{width:300,margin:"auto"},children:[Object(x.jsx)(h.a.Item,{name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(x.jsx)(b.a,{prefix:Object(x.jsx)(m.a,{}),placeholder:"Username"})}),Object(x.jsx)(h.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(x.jsx)(b.a,{prefix:Object(x.jsx)(p.a,{}),type:"password",placeholder:"Password"})}),Object(x.jsx)(h.a.Item,{children:Object(x.jsx)(f.a,{type:"primary",htmlType:"submit",loading:e.state.loading,children:"Login"})})]})},e}return n}(a.Component),S=y,v=n(75),w=n(70),C=n(235),F=n(233),I=n(147),P=v.a.Option,k=function(e){var t=e.itemId,n=Object(a.useState)(!1),s=Object(r.a)(n,2),c=s[0],i=s[1];return Object(x.jsx)(w.a,{title:"Add to shopping cart",children:Object(x.jsx)(f.a,{type:"primary",icon:Object(x.jsx)(I.a,{}),onClick:function(){console.log("itemId: ",t),i(!0),function(e){return fetch("/order/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to add menu item to shopping cart")}))}(t).then((function(){j.b.success("Successfully add item")})).catch((function(e){j.b.error(e.message)})).finally((function(){i(!1)}))},loading:c})})},T=function(){var e=Object(a.useState)(),t=Object(r.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)([]),i=Object(r.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)(!1),d=Object(r.a)(u,2),h=d[0],b=d[1],f=Object(a.useState)([]),m=Object(r.a)(f,2),p=m[0],O=m[1],g=Object(a.useState)(!1),y=Object(r.a)(g,2),S=y[0],w=y[1];return Object(a.useEffect)((function(){b(!0),fetch("/restaurants").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get restaurants");return e.json()})).then((function(e){console.log("restData: ",e),l(e)})).catch((function(e){j.b.error(e.message)})).finally((function(){b(!1)}))}),[]),Object(a.useEffect)((function(){var e;n&&(w(!0),(e=n,fetch("/restaurant/".concat(e,"/menu")).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get menus");return e.json()}))).then((function(e){console.log("menuData: ",e),O(e)})).catch((function(e){j.b.error(e.message)})).finally((function(){w(!1)})))}),[n]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(v.a,{value:n,placeholder:"Select a restaurant",style:{width:300},onSelect:function(e){return s(e)},loading:h,children:o.map((function(e){return Object(x.jsx)(P,{value:e.id,children:e.name},e.id)}))}),n&&Object(x.jsx)(C.b,{style:{marginTop:20},grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},loading:S,dataSource:p,renderItem:function(e){return Object(x.jsx)(C.b.Item,{children:Object(x.jsxs)(F.a,{title:e.name,extra:Object(x.jsx)(k,{itemId:e.id}),children:[Object(x.jsx)("img",{src:e.imageUrl,alt:e.name,style:{height:"auto",width:"100%",display:"block"}}),"Price: ".concat(e.price)]})})}})]})},E=n(240),L=o.a.Text;var M=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)({}),i=Object(r.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)(!1),d=Object(r.a)(u,2),h=d[0],b=d[1],m=Object(a.useState)(!1),p=Object(r.a)(m,2),O=p[0],g=p[1],y=function(){s(!1)};return Object(a.useEffect)((function(){n&&(b(!0),fetch("/cart").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get shopping cart data");return e.json()})).then((function(e){console.log("cartData: ",e),l(e)})).catch((function(e){j.b.error(e.message)})).finally((function(){b(!1)})))}),[n]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(f.a,{type:"primary",shape:"round",onClick:function(){s(!0)},children:"Cart"}),Object(x.jsx)(E.a,{title:"My Shopping Cart",onClose:y,visible:n,width:520,footer:Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(x.jsxs)(L,{strong:!0,children:["Total price: $".concat(o.totalPrice?o.totalPrice.toFixed(2):(0).toFixed(2))," "]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(f.a,{style:{marginRight:8},onClick:y,children:"Cancel"}),Object(x.jsx)(f.a,{type:"primary",onClick:function(){g(!0),fetch("/checkout").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to checkout")})).then((function(){j.b.success("Successfully checkout"),s(!1)})).catch((function(e){j.b.error(e.message)})).finally((function(){g(!1)}))},loading:O,disabled:h||o.orderItemList&&0===o.orderItemList.length,children:"Checkout"})]})]}),children:Object(x.jsx)(C.b,{loading:h,dataSource:o.orderItemList?o.orderItemList:[],renderItem:function(e){return Object(x.jsx)(C.b.Item,{children:Object(x.jsx)(C.b.Item.Meta,{title:e.menuItem.name,description:"$".concat(e.price)})})}})})]})},q=n(139),N=n(237),R=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={displayModal:!1,loading:!1},e.handleCancel=function(){e.setState({displayModal:!1})},e.signupOnClick=function(){e.setState({displayModal:!0})},e.onFinish=function(t){console.log("Received values of sign up form: ",t),e.setState({loading:!0}),g(t).then((function(){j.b.success("Successfully signed up"),e.setState({displayModal:!1})})).catch((function(e){j.b.error(e.message)})).finally((function(){e.setState({loading:!1})}))},e}return Object(q.a)(n,[{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(f.a,{type:"primary",shape:"round",onClick:this.signupOnClick,children:"Register"}),Object(x.jsx)(N.a,{title:"Register",visible:this.state.displayModal,onCancel:this.handleCancel,okButtonProps:{style:{display:"none"}},destroyOnClose:!0,children:Object(x.jsxs)(h.a,{name:"normal_register",onFinish:this.onFinish,preserve:!1,children:[Object(x.jsx)(h.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(x.jsx)(b.a,{prefix:Object(x.jsx)(m.a,{}),placeholder:"Email"})}),Object(x.jsx)(h.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(x.jsx)(b.a.Password,{prefix:Object(x.jsx)(p.a,{}),placeholder:"Password"})}),Object(x.jsx)(h.a.Item,{name:"firstName",rules:[{required:!0,message:"Please input your first name!"}],children:Object(x.jsx)(b.a,{placeholder:"First Name"})}),Object(x.jsx)(h.a.Item,{name:"lastName",rules:[{required:!0,message:"Please input your last name!"}],children:Object(x.jsx)(b.a,{placeholder:"Last Name"})}),Object(x.jsx)(h.a.Item,{children:Object(x.jsx)(f.a,{type:"primary",htmlType:"submit",loading:this.state.loading,children:"Register"})})]})})]})}}]),n}(a.Component),B=R,D=i.a.Header,J=i.a.Content,A=o.a.Title;var H=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1];return Object(x.jsxs)(i.a,{style:{height:"100vh"},children:[Object(x.jsx)(D,{children:Object(x.jsxs)("div",{className:"header",children:[Object(x.jsx)(A,{level:2,style:{color:"white",lineHeight:"inherit",marginBottom:0},children:"JinFood"}),Object(x.jsx)("div",{children:n?Object(x.jsx)(M,{}):Object(x.jsx)(B,{})})]})}),Object(x.jsx)(J,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflowY:"auto"},children:n?Object(x.jsx)(T,{}):Object(x.jsx)(S,{onSuccess:function(){return s(!0)}})})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,243)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};c.a.render(Object(x.jsx)(H,{}),document.getElementById("root")),U()}},[[231,1,2]]]);
//# sourceMappingURL=main.31712166.chunk.js.map